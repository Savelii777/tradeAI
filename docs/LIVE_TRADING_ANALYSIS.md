# üîç –ì–ª—É–±–æ–∫–∏–π –ê–Ω–∞–ª–∏–∑ –ú–æ–¥–µ–ª–∏ train_v3_dynamic.py –¥–ª—è Live Trading

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** –Ø–Ω–≤–∞—Ä—å 2026  
**–í–µ—Ä—Å–∏—è –º–æ–¥–µ–ª–∏:** V8 Improved (Anti-Overfitting Edition)  
**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** AI Analyst

---

## üìä –ö—Ä–∞—Ç–∫–æ–µ –†–µ–∑—é–º–µ

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–µ–∫—Ç–µ—Å—Ç | Walk-Forward | –û–∂–∏–¥–∞–Ω–∏–µ –≤ Live |
|---------|---------|--------------|-----------------|
| Win Rate | 80%+ | 70%+ | 55-65%* |
| –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å | ‚ö†Ô∏è | ‚úÖ | - |

**\* –ü—Ä–æ–≥–Ω–æ–∑ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ç–∏–ø–∏—á–Ω–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –ª–∞–π–≤.**

---

## ‚úÖ –ß—Ç–æ –°–¥–µ–ª–∞–Ω–æ –ü–†–ê–í–ò–õ–¨–ù–û

### 1. Anti-Overfitting Improvements
```python
# –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (train_v3_dynamic.py:228-239)
n_estimators=100,        # –ë—ã–ª–æ 600 ‚Üí 100 (–º–µ–Ω—å—à–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è)
max_depth=3,             # –ë—ã–ª–æ 5 ‚Üí 3 (–ø—Ä–æ—â–µ –¥–µ—Ä–µ–≤—å—è)
num_leaves=8,            # –ë—ã–ª–æ 20 ‚Üí 8 (–º–µ–Ω—å—à–µ –≤–µ—Ç–≤–µ–π)
min_child_samples=50,    # –ù–û–í–û–ï! –¢—Ä–µ–±—É–µ—Ç 50+ samples –Ω–∞ –ª–∏—Å—Ç
```
**‚úÖ –û—Ç–ª–∏—á–Ω–æ:** –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è.

### 2. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ Cumsum-–∑–∞–≤–∏—Å–∏–º—ã—Ö –§–∏—á–µ–π
```python
# train_v3_dynamic.py:764-769, live_trading_mexc_v8.py:850-859
cumsum_patterns = [
    'bars_since_swing', 'consecutive_up', 'consecutive_down',
    'obv', 'volume_delta_cumsum', 'swing_high_price', 'swing_low_price'
]
```
**‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:** –≠—Ç–∏ —Ñ–∏—á–∏ –¥–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –±–µ–∫—Ç–µ—Å—Ç–µ (–¥–∞–Ω–Ω—ã–µ —Å 2017) vs –ª–∞–π–≤ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 —Å–≤–µ—á–µ–π).

### 3. –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π Slippage
```python
SLIPPAGE_PCT = 0.0005  # 0.05% - —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π slippage
```
**‚úÖ –•–æ—Ä–æ—à–æ:** –ú–Ω–æ–≥–∏–µ –±–µ–∫—Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç 0.01% —á—Ç–æ –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ.

### 4. Walk-Forward Validation
```python
# walk_forward_validation() - train_v3_dynamic.py:662-852
# –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–∞ –ë–£–î–£–©–ò–• –¥–∞–Ω–Ω—ã—Ö, –Ω–µ –Ω–∞ —Ç–µ—Ö –∂–µ —á—Ç–æ –æ–±—É—á–∞–ª–∞—Å—å
```
**‚úÖ –ö–ª—é—á–µ–≤–æ–µ:** Walk-Forward –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 70%+ WR —á—Ç–æ —É–∂–µ –±–ª–∏–∂–µ –∫ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.

### 5. Shift M15 –¥–∞–Ω–Ω—ã—Ö
```python
# train_mtf.py:253-255
m15_shifted = m15_features.shift(1)  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ü–†–ï–î–´–î–£–©–£–Æ —Å–≤–µ—á—É M15
```
**‚úÖ –ö—Ä–∏—Ç–∏—á–Ω–æ:** –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç lookahead bias - –≤ –ª–∞–π–≤–µ —Ç–µ–∫—É—â–∞—è M15 —Å–≤–µ—á–∞ –µ—â—ë —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è!

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

### 1. üî¥ –ö–†–ò–¢–ò–ß–ù–û: OBV –∏ cumsum —Ñ–∏—á–∏ –≤ indicators.py

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `src/features/indicators.py:450-454`:
```python
# OBV –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å cumsum() –æ—Ç –ù–ê–ß–ê–õ–ê –¥–∞–Ω–Ω—ã—Ö
obv = (np.sign(price_change) * volume).cumsum()
feature_dict['obv'] = obv
feature_dict['obv_ema'] = self.ema(obv, 20)
feature_dict['volume_delta_cumsum'] = pd.Series(volume_delta, index=df.index).rolling(window=20).sum()
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
- –í –±–µ–∫—Ç–µ—Å—Ç–µ: –¥–∞–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 2017 –≥–æ–¥–∞ ‚Üí OBV –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –∑–∞ ~8 –ª–µ—Ç
- –í –ª–∞–π–≤–µ: –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 —Å–≤–µ—á–µ–π ‚Üí OBV —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–æ–π
- –ú–æ–¥–µ–ª—å –æ–±—É—á–∞–ª–∞—Å—å –Ω–∞ OBV —Å –æ–≥—Ä–æ–º–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –≤ –ª–∞–π–≤–µ –ø–æ–ª—É—á–∞–µ—Ç –º–∞–ª–µ–Ω—å–∫–∏–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - —ç—Ç–∏ —Ñ–∏—á–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –≤ train_v3_dynamic.py –∏ live_trading_mexc_v8.py

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–æ–¥–µ–ª–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω—ã –ë–ï–ó —ç—Ç–∏—Ö —Ñ–∏—á–µ–π. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `feature_names.joblib`:
```bash
python -c "import joblib; print([f for f in joblib.load('models/v8_improved/feature_names.joblib') if 'obv' in f or 'cumsum' in f])"
```
–ï—Å–ª–∏ –≤—ã–≤–æ–¥ –Ω–µ –ø—É—Å—Ç–æ–π - –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏!

---

### 2. üî¥ –ö–†–ò–¢–ò–ß–ù–û: swing_high_price / swing_low_price —Å ffill

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `src/features/market_structure.py:90-91`:
```python
swings['swing_high_price'] = high.where(swing_high, np.nan).ffill(limit=200)
swings['swing_low_price'] = low.where(swing_low, np.nan).ffill(limit=200)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
- `ffill()` –±–µ–∑ `limit` –ø—Ä–æ–ø–∞–≥–∏—Ä–æ–≤–∞–ª –±—ã –æ—Ç –ü–ï–†–í–û–ì–û —Å–≤–∏–Ω–≥–∞ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ
- `limit=200` –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ, –Ω–æ...
- –í –±–µ–∫—Ç–µ—Å—Ç–µ: –ø–µ—Ä–≤—ã–π —Å–≤–∏–Ω–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ —Ü–µ–Ω–µ $100
- –í –ª–∞–π–≤–µ: –ø–µ—Ä–≤—ã–π —Å–≤–∏–Ω–≥ –≤ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ —Ü–µ–Ω–µ $95000 (BTC –≤ 2026)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (limit=200), –Ω–æ –ª—É—á—à–µ –∏—Å–∫–ª—é—á–∏—Ç—å —ç—Ç–∏ —Ñ–∏—á–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å `'swing_high_price', 'swing_low_price'` –≤ cumsum_patterns (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –≤ –∫–æ–¥–µ).

---

### 3. üü° –í–ù–ò–ú–ê–ù–ò–ï: consecutive_up / consecutive_down

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `src/features/feature_engine.py:100-102`:
```python
'consecutive_up': (direction == 1).groupby((direction != 1).cumsum()).cumsum(),
'consecutive_down': (direction == -1).groupby((direction != -1).cumsum()).cumsum()
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `cumsum()` ‚Üí –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö
- –í –±–µ–∫—Ç–µ—Å—Ç–µ: –º–æ–∂–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —Å–µ—Ä–∏–∏ –≤ 50 —Å–≤–µ—á–µ–π up
- –í –ª–∞–π–≤–µ: –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç–µ–∫—É—â–∏—Ö 1000 —Å–≤–µ—á–µ–π

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - —ç—Ç–∏ —Ñ–∏—á–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è

---

### 4. üü° –í–ù–ò–ú–ê–ù–ò–ï: bars_since_swing

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `src/features/market_structure.py:94-95`:
```python
swings['bars_since_swing_high'] = swing_high.cumsum()
swings['bars_since_swing_low'] = swing_low.cumsum()
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - —ç—Ç–∏ —Ñ–∏—á–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è

---

### 5. üü° –í–ù–ò–ú–ê–ù–ò–ï: –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è EMA

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `train_mtf.py:206-212` –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
```python
# ‚úÖ FIX: Store as % distance from price instead of absolute price
features['m1_ema_3'] = (ema_3 - df['close']) / df['close'] * 100
features['m1_ema_8'] = (ema_8 - df['close']) / df['close'] * 100
```

–ù–æ –≤ `feature_engine.py` EMA –≤—Å—ë –µ—â—ë —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
```python
feature_dict[f'ema_{period}'] = ema  # –ê–±—Å–æ–ª—é—Ç–Ω–∞—è —Ü–µ–Ω–∞!
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
- –í –±–µ–∫—Ç–µ—Å—Ç–µ: BTC –º–æ–≥ —Å—Ç–æ–∏—Ç—å $30,000 ‚Üí EMA_200 = 28,000
- –í –ª–∞–π–≤–µ: BTC —Å—Ç–æ–∏—Ç $95,000 ‚Üí EMA_200 = 92,000
- –ú–æ–¥–µ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∏–¥–µ–ª–∞ —Ç–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è!

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –µ—Å—Ç—å `ema_{period}_dist` –∫–æ—Ç–æ—Ä—ã–π –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–∫–ª—é—á–∏—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ EMA –∏–∑ –º–æ–¥–µ–ª–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `ema_*_dist`.

---

### 6. üü° –í–ù–ò–ú–ê–ù–ò–ï: –†–∞–∑–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –ë–µ–∫—Ç–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –í–°–ï –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- –õ–∞–π–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ LOOKBACK —Å–≤–µ—á–µ–π (1000 –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏)

```python
# live_trading_mexc_v8.py:57
LOOKBACK = 1000  # –ë—ã–ª–æ 3000, —Ç–µ–ø–µ—Ä—å 1000
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- Rolling windows (EMA, RSI, ATR) –∫–æ–Ω–≤–µ—Ä–≥–∏—Ä—É—é—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É
- EMA-200 —Ç—Ä–µ–±—É–µ—Ç ~1000 —Å–≤–µ—á–µ–π –¥–ª—è –ø–æ–ª–Ω–æ–π –∫–æ–Ω–≤–µ—Ä–≥–µ–Ω—Ü–∏–∏
- –° LOOKBACK=1000 EMA-200 –º–æ–∂–µ—Ç –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ö–æ–¥–∏—Ç—å—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
- –î–ª—è M5: 1000 —Å–≤–µ—á–µ–π = ~3.5 –¥–Ω—è. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤.
- –î–ª—è EMA-200 –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 1500+ —Å–≤–µ—á–µ–π –∏–ª–∏ –∏—Å–∫–ª—é—á–∏—Ç—å EMA-200.

---

### 7. üü° –í–ù–ò–ú–ê–ù–ò–ï: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ FeatureEngine

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `feature_engine.py:209-250` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è rolling normalization:
```python
self.normalization_window = self.config.get('normalization_window', 500)
norm_col = normalize_series(features[col], window=self.normalization_window, method=method)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π:**
- –í –±–µ–∫—Ç–µ—Å—Ç–µ: normalization_window –∑–∞–ø–æ–ª–Ω–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –∑–∞ 500 —Å–≤–µ—á–µ–π
- –í –Ω–∞—á–∞–ª–µ –ª–∞–π–≤–∞: –ø–µ—Ä–≤—ã–µ 500 —Å–≤–µ—á–µ–π –±—É–¥—É—Ç –∏–º–µ—Ç—å NaN –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è NaN –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 8. üü¢ –ü–†–û–í–ï–†–ï–ù–û: M15 lookahead bias

**–ü—Ä–æ–±–ª–µ–º–∞ (–±—ã–ª–∞):** M15 —Å–≤–µ—á–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç, –Ω–æ M5 –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç.

**–†–µ—à–µ–Ω–∏–µ (train_mtf.py:253-255):**
```python
m15_shifted = m15_features.shift(1)  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ü–†–ï–î–´–î–£–©–£–Æ –∑–∞–∫—Ä—ã—Ç—É—é M15
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üìà –§–∞–∫—Ç–æ—Ä—ã –î–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –æ—Ç –±–µ–∫—Ç–µ—Å—Ç–∞ –∫ –ª–∞–π–≤—É –æ–±—ã—á–Ω–æ —Ç–µ—Ä—è–µ—Ç—Å—è 10-20% Win Rate:

| –§–∞–∫—Ç–æ—Ä | –í–ª–∏—è–Ω–∏–µ | –í –∫–æ–¥–µ |
|--------|---------|--------|
| Slippage | -2-3% WR | ‚úÖ –£—á—Ç–µ–Ω–æ (0.05%) |
| –ö–æ–º–∏—Å—Å–∏–∏ | -1% WR | ‚úÖ –£—á—Ç–µ–Ω–æ (0.02%) |
| Latency | -2-3% WR | ‚ö†Ô∏è –ù–µ —É—á—Ç–µ–Ω–æ |
| Market Impact | -1-2% WR | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (MAX_POSITION_SIZE) |
| Data Quality | -2-3% WR | ‚ö†Ô∏è –ù–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è |
| Regime Change | -3-5% WR | ‚ö†Ô∏è –ù–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è |

**–ò—Ç–æ–≥–æ –æ–∂–∏–¥–∞–µ–º–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è: 10-15%**

Walk-Forward: 70% ‚Üí –õ–∞–π–≤ –æ–∂–∏–¥–∞–Ω–∏–µ: **55-65%**

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –î–µ–π—Å—Ç–≤–∏—è

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å feature_names.joblib:**
```bash
python -c "
import joblib
features = joblib.load('models/v8_improved/feature_names.joblib')
dangerous = [f for f in features if any(p in f.lower() for p in 
    ['obv', 'cumsum', 'bars_since_swing', 'consecutive', 'swing_high_price', 'swing_low_price'])]
print('Dangerous features in model:', dangerous)
if dangerous:
    print('‚ùå NEED TO RETRAIN MODEL!')
else:
    print('‚úÖ Model is clean')
"
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è EMA:**
```bash
python -c "
import joblib
features = joblib.load('models/v8_improved/feature_names.joblib')
# EMA –±–µ–∑ _dist - —ç—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
ema_absolute = [f for f in features if 'ema_' in f and '_dist' not in f and '_slope' not in f]
print('Absolute EMA features:', ema_absolute)
if ema_absolute:
    print('‚ö†Ô∏è These may cause issues with price changes')
"
```

3. **–î–æ–±–∞–≤–∏—Ç—å pre-flight check –≤ live trading:**
```python
def validate_features_before_trade(X, feature_names):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ñ–∏—á–∏ –≤ –æ–∂–∏–¥–∞–µ–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ"""
    for i, feat in enumerate(feature_names):
        val = X[0][i]
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ NaN/Inf
        if np.isnan(val) or np.isinf(val):
            logger.warning(f"Feature {feat} has invalid value: {val}")
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏—á–∏ –≤ —Ä–∞–∑—É–º–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
        if 'normalized' in feat or 'zscore' in feat:
            if abs(val) > 10:
                logger.warning(f"Feature {feat} has extreme value: {val}")
```

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å –æ–Ω–ª–∞–π–Ω-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥—Ä–µ–π—Ñ–∞ —Ñ–∏—á–µ–π:**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ñ–∏—á–µ–π (mean, std) –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏
   - –í –ª–∞–π–≤–µ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏
   - –ê–ª–µ—Ä—Ç –µ—Å–ª–∏ –¥—Ä–µ–π—Ñ > 2 std

2. **–£–≤–µ–ª–∏—á–∏—Ç—å LOOKBACK –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:**
   - –¢–µ–∫—É—â–µ–µ: 1000 —Å–≤–µ—á–µ–π
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ: 1500-2000 –¥–ª—è M5

3. **–î–æ–±–∞–≤–∏—Ç—å confidence calibration:**
   - –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å overconfident
   - –ö–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –Ω–∞ validation set

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π –ß–µ–∫–ª–∏—Å—Ç –ü–µ—Ä–µ–¥ –õ–∞–π–≤–æ–º

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `feature_names.joblib` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç cumsum-–∑–∞–≤–∏—Å–∏–º—ã—Ö —Ñ–∏—á–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ EMA –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–ª–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å test_backtest_vs_live.py –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–∑–Ω–∏—Ü–∞ < 30%
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ LOOKBACK >= 1000 —Å–≤–µ—á–µ–π
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å paper trading –Ω–∞ 1-2 –Ω–µ–¥–µ–ª–∏
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å Win Rate paper vs backtest

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ú–æ–¥–µ–ª—å train_v3_dynamic.py –ì–û–¢–û–í–ê –∫ –ª–∞–π–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é** –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π:

1. ‚úÖ Cumsum-–∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ–∏—á–∏ —É–∂–µ –∏—Å–∫–ª—é—á–µ–Ω—ã –≤ –∫–æ–¥–µ
2. ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –º–æ–¥–µ–ª–∏ –æ–±—É—á–µ–Ω—ã –ë–ï–ó —ç—Ç–∏—Ö —Ñ–∏—á–µ–π
3. ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ EMA –∑–Ω–∞—á–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π Win Rate –≤ –ª–∞–π–≤–µ: 55-65%** (–ø—Ä–∏ —Ç–µ–∫—É—â–µ–º Walk-Forward 70%+)

–≠—Ç–æ –≤—Å—ë –µ—â—ë –ø—Ä–∏–±—ã–ª—å–Ω–æ –ø—Ä–∏ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö RR (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π SL, trailing stop), –Ω–æ –Ω—É–∂–Ω–æ –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫ –ø–µ—Ä–∏–æ–¥–∞–º drawdown.

---

---

## üõ†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–í —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã:

### 1. `scripts/validate_live_readiness.py`
Pre-flight –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ª–∞–π–≤:
```bash
python scripts/validate_live_readiness.py
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –ù–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ –º–æ–¥–µ–ª–µ–π
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ cumsum-–∑–∞–≤–∏—Å–∏–º—ã—Ö —Ñ–∏—á–µ–π
- ‚úÖ –¢–∏–ø timing –º–æ–¥–µ–ª–∏ (regressor vs classifier)
- ‚úÖ Anti-overfitting –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 2. `scripts/compare_feature_distributions.py`
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–∏—á–µ–π –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º–∏ –∏ –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
```bash
python scripts/compare_feature_distributions.py --pair BTC_USDT_USDT --hours 48
python scripts/compare_feature_distributions.py --all-pairs
```

–í—ã—è–≤–ª—è–µ—Ç:
- ‚ö†Ô∏è –§–∏—á–∏ —Å –∏–∑–º–µ–Ω–∏–≤—à–∏–º—Å—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
- ‚ùå Cumsum-–∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ–∏—á–∏
- üìä KS-—Ç–µ—Å—Ç –Ω–∞ —Ä–∞–∑–ª–∏—á–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ü–µ—Ä–µ–¥ –õ–∞–π–≤–æ–º

```
[ ] 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å validate_live_readiness.py - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
[ ] 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å compare_feature_distributions.py - –Ω–µ—Ç critical —Ñ–∏—á–µ–π
[ ] 3. –ú–æ–¥–µ–ª–∏ –æ–±—É—á–µ–Ω—ã —Å --walk-forward —Ñ–ª–∞–≥–æ–º
[ ] 4. Walk-Forward WR >= 60%
[ ] 5. Paper trading –º–∏–Ω–∏–º—É–º 7 –¥–Ω–µ–π
[ ] 6. Paper WR —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Walk-Forward (+/- 10%)
[ ] 7. –ü—Ä–æ–≤–µ—Ä–µ–Ω LOOKBACK >= 1000 –≤ live_trading_mexc_v8.py
[ ] 8. –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã API –∫–ª—é—á–∏ MEXC
[ ] 9. Telegram –∞–ª–µ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
[ ] 10. Logs –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è
```

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.1  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-07  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-07
